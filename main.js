(()=>{"use strict";const e={inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"},t=document.querySelector(".page"),s=t.querySelector("#popup-profile"),i=t.querySelector("#popup-add-card"),n=t.querySelector("#popup-profile-pic"),r=t.querySelector(".profile__edit-button"),o=t.querySelector(".profile__add-button"),a=t.querySelector(".profile__image-container"),l=t.querySelector(".popup__input_type_name"),h=t.querySelector(".popup__input_type_title"),u=class{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputError(e,t){const s=this._form.querySelector(".".concat(e.id,"-input-error"));e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)}_resetError(e){e.textContent=""}_hideInputError(e){const t=this._form.querySelector(".".concat(e.id,"-input-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),setTimeout((()=>this._resetError(t)),100)}_isValid(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}_disableButton(){this._buttonEl.classList.add(this._inactiveButtonClass),this._buttonEl.disabled=!0}_enableButton(){this._buttonEl.classList.remove(this._inactiveButtonClass),this._buttonEl.disabled=!1}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?this._disableButton():this._enableButton()}_setEventListeners(){this._inputEls=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonEl=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._isValid(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class _{constructor(e,t,s,i,n){this._name=e.name,this._link=e.link,this._handleCardClick=s,this._template=t,this._likes=e.likes,this._handleTrashButtonClick=i,this._ownerId=e.owner._id,this._userId=e.userId,this._id=e._id,this._handleLikeButton=n}_getTemplate(){return document.querySelector(this._template).content.querySelector(".card").cloneNode(!0)}updateLikes(e){this._likes=e,this._renderLikes()}_renderLikes(){this._likesTotal.textContent=this._likes.length,this.isLiked()?this._likeButton.classList.add("card__like_clicked"):this._likeButton.classList.remove("card__like_clicked")}isLiked(){return this._likes.some((e=>e._id===this._userId))}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeButton(this)})),this._trashButton.addEventListener("click",(()=>{this._handleTrashButtonClick(this)})),this._imageEl.addEventListener("click",(()=>{this._handleCardClick({link:this._link,name:this._name})}))}getCardId(){return this._id}handleDelete(){this._cardEl.remove(),this._cardEl=null}getView(){return this._cardEl=this._getTemplate(),this._likeButton=this._cardEl.querySelector(".card__like"),this._trashButton=this._cardEl.querySelector(".card__trash"),this._imageEl=this._cardEl.querySelector(".card__image"),this._likesTotal=this._cardEl.querySelector(".card__like-num"),this._cardEl.querySelector(".card__title").textContent=this._name,this._imageEl.style.backgroundImage="url(".concat(this._link,")"),this._renderLikes(),this._ownerId!==this._userId&&this._trashButton.remove(),this._setEventListeners(),this._cardEl}}const c=class{constructor(e){this._popup=document.querySelector(e),this.open=this.open.bind(this),this.close=this.close.bind(this),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add("popup_is-visible"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_is-visible"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close(this._popup)}renderSaving(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=e?t:this._submitButtonText}setEventListeners(){this._popupCloseButton=this._popup.querySelector(".popup__close"),this._popupCloseButton.addEventListener("click",this.close),this._popup.addEventListener("mousedown",(e=>{e.target.matches(".popup")&&this.close()}))}},d=class extends c{constructor(e,t){super(e),this._form=this._popup.querySelector(".popup__form"),this._handleSubmit=t,this._submitButton=this._form.querySelector(".popup__submit-button"),this._submitButtonText=this._submitButton.textContent,this._inputs=this._form.querySelectorAll(".popup__input")}_getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}open(){super.open(),this._submitButton.setAttribute.disabled=!0,this._submitButton.classList.add("popup__submit-button_disabled")}close(){super.close(),this._form.reset()}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues())}))}},p=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_handleResponse(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}initialize(){return Promise.all([this.getUser(),this.getInitialCards()])}getInitialCards(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((e=>this._handleResponse(e)))}getUser(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((e=>this._handleResponse(e)))}setUserInfo(e){let{name:t,title:s}=e;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then((e=>this._handleResponse(e)))}addCard(e){let{name:t,link:s}=e;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then((e=>this._handleResponse(e)))}deleteCard(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((e=>this._handleResponse(e)))}toggleLike(e,t){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:t?"DELETE":"PUT",headers:this._headers}).then((e=>this._handleResponse(e)))}updateProfilePic(e){let{avatar:t}=e;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((e=>this._handleResponse(e)))}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"233760b2-865b-418c-a988-0a5daaaf7846","Content-Type":"application/json"}}),m=e=>{const t=new _(e,"#card-template",v,b,q);E.addItem(t.getView())};function v(e){g.open(e)}function b(e){B.open(e)}let E,f;p.initialize().then((e=>{const[t,s]=e;E=new class{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:s,renderer:e=>{f=t._id,m({name:e.name,link:e.link,likes:e.likes,owner:e.owner,_id:e._id,userId:f})}},".elements"),E.renderItems(),S.setUserInfo({name:t.name,title:t.about,avatar:t.avatar})})).catch((e=>{console.log(e)}));const S=new class{constructor(e){let{userNameSelector:t,titleSelector:s,profilePicSelector:i}=e;this._userName=document.querySelector(t),this._title=document.querySelector(s),this._profilePic=document.querySelector(i)}getUserInfo(){return{name:this._userName.textContent,title:this._title.textContent}}setUserInfo(e){let{name:t,title:s,avatar:i}=e;this._userName.textContent=t,this._title.textContent=s,this._profilePic.src=i}}({userNameSelector:".profile__name",titleSelector:".profile__description",profilePicSelector:".profile__image"}),g=new class extends c{constructor(e){super(e),this._imagePopupImage=this._popup.querySelector(".popup__image"),this._imagePopupCaption=this._popup.querySelector(".popup__caption"),this.open=this.open.bind(this)}open(e){let{link:t,name:s}=e;super.open(),this._imagePopupImage.src=t,this._imagePopupImage.alt=s,this._imagePopupCaption.textContent=s}}(".popup_type_image");g.setEventListeners();const k=new u(e,s),y=new u(e,i);new u(e,n).enableValidation(),k.enableValidation(),y.enableValidation();const C=new d(".popup_type_edit",(function(e){C.renderSaving(!0),p.setUserInfo(e).then((e=>{S.setUserInfo({name:e.name,title:e.about,avatar:e.avatar}),C.close()})).catch((e=>{console.log(e)})).finally((()=>{C.renderSaving(!1)}))}));C.setEventListeners(),r.addEventListener("click",(()=>{!function(){const{name:e,title:t}=S.getUserInfo();l.value=e,h.value=t,C.open()}()}));const L=new d(".popup_type_add",(function(e){L.renderSaving(!0),p.addCard(e).then((e=>{m({name:e.name,link:e.link,likes:e.likes,owner:e.owner,_id:e._id,userId:f}),L.close()})).catch((e=>{console.log(e)})).finally((()=>{L.renderSaving(!1)}))}));L.setEventListeners(),o.addEventListener("click",L.open);const B=new class extends c{constructor(e,t){super(e),this._form=this._popup.querySelector(".popup__form"),this._handleSubmit=t,this._submitButton=this._form.querySelector(".popup__submit-button"),this._submitButtonText=this._submitButton.textContent}open(e){super.open(),this._card=e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._card)}))}}(".popup_type_delete",(function(e){B.renderSaving(!0),p.deleteCard(e.getCardId()).then((()=>{e.handleDelete(),B.close()})).catch((e=>{console.log(e)})).finally((()=>{B.renderSaving(!1)}))}));B.setEventListeners();const I=new d(".popup_type_edit-profile-pic",(function(e){I.renderSaving(!0),p.updateProfilePic(e).then((e=>{S.setUserInfo({name:e.name,title:e.about,avatar:e.avatar}),I.close()})).catch((e=>{console.log(e)})).finally((()=>{I.renderSaving(!1)}))}));function q(e){p.toggleLike(e._id,e.isLiked()).then((t=>{e.updateLikes(t.likes)})).catch((e=>{console.log(e)}))}I.setEventListeners(),a.addEventListener("click",(()=>{I.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cEQsb0JBRVosTUFBTTBGLEVBQWtCLElBQUlOLEVBQzFCLGdDQTBFRixTQUFnQ3hJLEdBQzlCOEksRUFBZ0IvRixjQUFhLEdBQzdCbUIsRUFBQUEsaUJBQ29CbEUsR0FDakJtRixNQUFNbkYsSUFDTG9ILEVBQVNoQyxZQUFZLENBQ25COUUsS0FBTU4sRUFBS00sS0FDWCtFLE1BQU9yRixFQUFLMEYsTUFDWk0sT0FBUWhHLEVBQUtnRyxTQUVmOEMsRUFBZ0JuRyxPQUFoQixJQUVEMEUsT0FBT0MsSUFDTkMsUUFBUUMsSUFBSUYsRUFBWixJQUVEbUIsU0FBUSxLQUNQSyxFQUFnQi9GLGNBQWEsRUFBN0IsR0FFTCxJQUVELFNBQVMrQyxFQUFXSyxHQUNsQmpDLEVBQUFBLFdBQ2NpQyxFQUFLbkYsSUFBS21GLEVBQUt4RSxXQUMxQndELE1BQU12RSxJQUNMdUYsRUFBSzVFLFlBQVlYLEVBQU1BLE1BQXZCLElBRUR5RyxPQUFPQyxJQUNOQyxRQUFRQyxJQUFJRixFQUFaLEdBRUwsQ0FwR0R3QixFQUFnQjFGLG9CQUNoQm5HLEVBQXFCMEMsaUJBQWlCLFNBQVMsS0FDN0NtSixFQUFnQnJHLE1BQWhCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aERlbGV0ZUNvbmZpcm0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0LWVycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyYXBwZXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmNvbnN0IHBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBhZ2VcIik7XHJcbmNvbnN0IHBvcHVwUHJvZmlsZUZvcm0gPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtcHJvZmlsZVwiKTtcclxuY29uc3QgcG9wdXBBZGRGb3JtID0gcGFnZS5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLWFkZC1jYXJkXCIpO1xyXG5jb25zdCBwb3B1cFByb2ZpbGVQaWNGb3JtID0gcGFnZS5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLXByb2ZpbGUtcGljXCIpO1xyXG5jb25zdCBjYXJkRWxlbWVudHNTZWxlY3RvciA9IFwiLmVsZW1lbnRzXCI7XHJcbmNvbnN0IHByb2ZpbGVQaWNTZWxlY3RvciA9IFwiLnByb2ZpbGVfX2ltYWdlXCI7XHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCdXR0b25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmNvbnN0IGVkaXRCdXR0b24gPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IGFkZEJ1dHRvbiA9IHBhZ2UucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5jb25zdCBlZGl0UHJvZmlsZVBpY0J1dHRvbiA9IHBhZ2UucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZS1jb250YWluZXJcIik7XHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbnB1dHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmNvbnN0IHByb2ZpbGVOYW1lU2VsZWN0b3IgPSBcIi5wcm9maWxlX19uYW1lXCI7XHJcbmNvbnN0IHByb2ZpbGVUaXRsZVNlbGVjdG9yID0gXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIjtcclxuY29uc3QgcG9wdXBOYW1lID0gcGFnZS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX25hbWVcIik7XHJcbmNvbnN0IHBvcHVwVGl0bGUgPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X3R5cGVfdGl0bGVcIik7XHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRlbXBsYXRlcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5jb25zdCBjYXJkVGVtcGxhdGVTZWxlY3RvciA9IFwiI2NhcmQtdGVtcGxhdGVcIjtcclxuXHJcbmV4cG9ydCB7XHJcbiAgc2V0dGluZ3MsXHJcbiAgcG9wdXBQcm9maWxlRm9ybSxcclxuICBwb3B1cEFkZEZvcm0sXHJcbiAgcG9wdXBQcm9maWxlUGljRm9ybSxcclxuICBjYXJkRWxlbWVudHNTZWxlY3RvcixcclxuICBlZGl0QnV0dG9uLFxyXG4gIGFkZEJ1dHRvbixcclxuICBlZGl0UHJvZmlsZVBpY0J1dHRvbixcclxuICBwcm9maWxlTmFtZVNlbGVjdG9yLFxyXG4gIHByb2ZpbGVUaXRsZVNlbGVjdG9yLFxyXG4gIHBvcHVwTmFtZSxcclxuICBwcm9maWxlUGljU2VsZWN0b3IsXHJcbiAgcG9wdXBUaXRsZSxcclxuICBjYXJkVGVtcGxhdGVTZWxlY3RvcixcclxufTtcclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsLmlkfS1pbnB1dC1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9yZXNldEVycm9yKGVycm9yRWxlbWVudCkge1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWwuaWR9LWlucHV0LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgLy8gdGltZSBkZWxheSB0byBhbGxvdyBjc3MgdHJhbnNpdGlvbiB0byBzaG93IGVmZmVjdFxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLl9yZXNldEVycm9yKGVycm9yRWxlbWVudCksIDEwMCk7XHJcbiAgfVxyXG5cclxuICBfaXNWYWxpZChpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCwgaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XHJcbiAgICByZXR1cm4gIWlucHV0TGlzdC5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBfZW5hYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0RWxzKSkge1xyXG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faXNWYWxpZChpbnB1dEVsKTtcclxuXHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGRhdGEsXHJcbiAgICB0ZW1wbGF0ZVNlbGVjdG9yLFxyXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxyXG4gICAgaGFuZGxlVHJhc2hCdXR0b25DbGljayxcclxuICAgIGhhbmRsZUxpa2VCdXR0b25cclxuICApIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5fdGVtcGxhdGUgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5faGFuZGxlVHJhc2hCdXR0b25DbGljayA9IGhhbmRsZVRyYXNoQnV0dG9uQ2xpY2s7XHJcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XHJcbiAgICB0aGlzLl91c2VySWQgPSBkYXRhLnVzZXJJZDtcclxuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uID0gaGFuZGxlTGlrZUJ1dHRvbjtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZSlcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVMaWtlcyhsaWtlcykge1xyXG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XHJcbiAgfVxyXG5cclxuICBfcmVuZGVyTGlrZXMoKSB7XHJcbiAgICB0aGlzLl9saWtlc1RvdGFsLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgaWYgKHRoaXMuaXNMaWtlZCgpKSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2VfY2xpY2tlZFwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2VfY2xpY2tlZFwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlzTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgobGlrZSkgPT4gbGlrZS5faWQgPT09IHRoaXMuX3VzZXJJZCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24odGhpcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl90cmFzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVUcmFzaEJ1dHRvbkNsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5faW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soeyBsaW5rOiB0aGlzLl9saW5rLCBuYW1lOiB0aGlzLl9uYW1lIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkSWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faWQ7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEZWxldGUoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWwucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWwgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRFbCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcblxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VcIik7XHJcbiAgICB0aGlzLl90cmFzaEJ1dHRvbiA9IHRoaXMuX2NhcmRFbC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RyYXNoXCIpO1xyXG4gICAgdGhpcy5faW1hZ2VFbCA9IHRoaXMuX2NhcmRFbC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fbGlrZXNUb3RhbCA9IHRoaXMuX2NhcmRFbC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtbnVtXCIpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRFbC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2ltYWdlRWwuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke3RoaXMuX2xpbmt9KWA7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG4gICAgaWYgKHRoaXMuX293bmVySWQgIT09IHRoaXMuX3VzZXJJZCkge1xyXG4gICAgICB0aGlzLl90cmFzaEJ1dHRvbi5yZW1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWw7XHJcbiAgfVxyXG59XHJcbiIsImNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcclxuIiwiY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMub3BlbiA9IHRoaXMub3Blbi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfaXMtdmlzaWJsZVwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX2lzLXZpc2libGVcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKHRoaXMuX3BvcHVwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlclNhdmluZyhpc1NhdmluZywgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKSB7XHJcbiAgICBpZiAoaXNTYXZpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIik7XHJcbiAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlKTtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5tYXRjaGVzKFwiLnBvcHVwXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zdWJtaXQtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXRFbC5uYW1lXSA9IGlucHV0RWwudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwicG9wdXBfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIik7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xyXG4iLCJjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVJlc3BvbnNlKHJlcykge1xyXG4gICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGluaXRpYWxpemUoKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0VXNlcigpLCB0aGlzLmdldEluaXRpYWxDYXJkcygpXSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlcigpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKSk7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIHRpdGxlIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGFib3V0OiB0aXRsZSxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUxpa2UoaWQsIGlzTGlrZWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2lkfWAsIHtcclxuICAgICAgbWV0aG9kOiBpc0xpa2VkID8gXCJERUxFVEVcIiA6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlUHJvZmlsZVBpYyh7IGF2YXRhciB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcixcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiMjMzNzYwYjItODY1Yi00MThjLWE5ODgtMGE1ZGFhYWY3ODQ2XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuIiwiaW1wb3J0IHtcclxuICBzZXR0aW5ncyxcclxuICBwb3B1cFByb2ZpbGVGb3JtLFxyXG4gIHBvcHVwQWRkRm9ybSxcclxuICBwb3B1cFByb2ZpbGVQaWNGb3JtLFxyXG4gIGNhcmRFbGVtZW50c1NlbGVjdG9yLFxyXG4gIGVkaXRCdXR0b24sXHJcbiAgYWRkQnV0dG9uLFxyXG4gIGVkaXRQcm9maWxlUGljQnV0dG9uLFxyXG4gIHByb2ZpbGVOYW1lU2VsZWN0b3IsXHJcbiAgcHJvZmlsZVRpdGxlU2VsZWN0b3IsXHJcbiAgcG9wdXBOYW1lLFxyXG4gIHBvcHVwVGl0bGUsXHJcbiAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXHJcbiAgcHJvZmlsZVBpY1NlbGVjdG9yLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7IGFwaSB9IGZyb20gXCIuLi9jb21wb25lbnRzL0FwaVwiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRGVsZXRlQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGVDb25maXJtLmpzXCI7XHJcblxyXG5jb25zdCByZW5kZXJDYXJkID0gKGNhcmQpID0+IHtcclxuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoXHJcbiAgICBjYXJkLFxyXG4gICAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXHJcbiAgICBoYW5kbGVUcmFzaEJ1dHRvbkNsaWNrLFxyXG4gICAgdG9nZ2xlTGlrZVxyXG4gICk7XHJcbiAgY2FyZExpc3QuYWRkSXRlbShuZXdDYXJkLmdldFZpZXcoKSk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2soY2FyZCkge1xyXG4gIGltYWdlUG9wdXAub3BlbihjYXJkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlVHJhc2hCdXR0b25DbGljayhjYXJkKSB7XHJcbiAgZGVsZXRlUG9wdXAub3BlbihjYXJkKTtcclxufVxyXG5cclxubGV0IGNhcmRMaXN0O1xyXG5sZXQgdXNlcklkO1xyXG5hcGlcclxuICAuaW5pdGlhbGl6ZSgpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgY29uc3QgW3VzZXIsIGRhdGFdID0gcmVzO1xyXG5cclxuICAgIGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgIHtcclxuICAgICAgICBpdGVtczogZGF0YSxcclxuICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgICAgIHVzZXJJZCA9IHVzZXIuX2lkO1xyXG4gICAgICAgICAgcmVuZGVyQ2FyZCh7XHJcbiAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcclxuICAgICAgICAgICAgbGluazogaXRlbS5saW5rLFxyXG4gICAgICAgICAgICBsaWtlczogaXRlbS5saWtlcyxcclxuICAgICAgICAgICAgb3duZXI6IGl0ZW0ub3duZXIsXHJcbiAgICAgICAgICAgIF9pZDogaXRlbS5faWQsXHJcbiAgICAgICAgICAgIHVzZXJJZCxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIGNhcmRFbGVtZW50c1NlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgY2FyZExpc3QucmVuZGVySXRlbXMoKTtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgbmFtZTogdXNlci5uYW1lLFxyXG4gICAgICB0aXRsZTogdXNlci5hYm91dCxcclxuICAgICAgYXZhdGFyOiB1c2VyLmF2YXRhcixcclxuICAgIH0pO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgfSk7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgdXNlck5hbWVTZWxlY3RvcjogcHJvZmlsZU5hbWVTZWxlY3RvcixcclxuICB0aXRsZVNlbGVjdG9yOiBwcm9maWxlVGl0bGVTZWxlY3RvcixcclxuICBwcm9maWxlUGljU2VsZWN0b3I6IHByb2ZpbGVQaWNTZWxlY3RvcixcclxufSk7XHJcblxyXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwX3R5cGVfaW1hZ2VcIik7XHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIGludGlhbGl6ZSBmb3JtIHZhbGlkYXRpb25cclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgcG9wdXBQcm9maWxlRm9ybSk7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgcG9wdXBBZGRGb3JtKTtcclxuY29uc3QgcHJvZmlsZVBpY0Zvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBzZXR0aW5ncyxcclxuICBwb3B1cFByb2ZpbGVQaWNGb3JtXHJcbik7XHJcbnByb2ZpbGVQaWNGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3R5cGVfZWRpdFwiLCBoYW5kbGVQcm9maWxlU3VibWl0KTtcclxuZWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBoYW5kbGVQcm9maWxlT3BlbigpO1xyXG59KTtcclxuXHJcbmNvbnN0IGFkZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfdHlwZV9hZGRcIiwgaGFuZGxlTmV3Q2FyZFN1Ym1pdCk7XHJcbmFkZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYWRkUG9wdXAub3Blbik7XHJcblxyXG5jb25zdCBkZWxldGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhEZWxldGVDb25maXJtKFxyXG4gIFwiLnBvcHVwX3R5cGVfZGVsZXRlXCIsXHJcbiAgaGFuZGxlQ29uZmlybURlbGV0ZVxyXG4pO1xyXG5kZWxldGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcHJvZmlsZVBpY1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIucG9wdXBfdHlwZV9lZGl0LXByb2ZpbGUtcGljXCIsXHJcbiAgaGFuZGxlUHJvZmlsZVBpY1N1Ym1pdFxyXG4pO1xyXG5wcm9maWxlUGljUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZWRpdFByb2ZpbGVQaWNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwcm9maWxlUGljUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVTdWJtaXQoZGF0YSkge1xyXG4gIGVkaXRQb3B1cC5yZW5kZXJTYXZpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuc2V0VXNlckluZm8oZGF0YSlcclxuICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgdGl0bGU6IGRhdGEuYWJvdXQsXHJcbiAgICAgICAgYXZhdGFyOiBkYXRhLmF2YXRhcixcclxuICAgICAgfSk7XHJcbiAgICAgIGVkaXRQb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBlZGl0UG9wdXAucmVuZGVyU2F2aW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlT3BlbigpIHtcclxuICBjb25zdCB7IG5hbWUsIHRpdGxlIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHBvcHVwTmFtZS52YWx1ZSA9IG5hbWU7XHJcbiAgcG9wdXBUaXRsZS52YWx1ZSA9IHRpdGxlO1xyXG4gIGVkaXRQb3B1cC5vcGVuKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZU5ld0NhcmRTdWJtaXQoZGF0YSkge1xyXG4gIGFkZFBvcHVwLnJlbmRlclNhdmluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC5hZGRDYXJkKGRhdGEpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJlbmRlckNhcmQoe1xyXG4gICAgICAgIG5hbWU6IHJlcy5uYW1lLFxyXG4gICAgICAgIGxpbms6IHJlcy5saW5rLFxyXG4gICAgICAgIGxpa2VzOiByZXMubGlrZXMsXHJcbiAgICAgICAgb3duZXI6IHJlcy5vd25lcixcclxuICAgICAgICBfaWQ6IHJlcy5faWQsXHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICB9KTtcclxuICAgICAgYWRkUG9wdXAuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgYWRkUG9wdXAucmVuZGVyU2F2aW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDb25maXJtRGVsZXRlKGNhcmQpIHtcclxuICBkZWxldGVQb3B1cC5yZW5kZXJTYXZpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuZGVsZXRlQ2FyZChjYXJkLmdldENhcmRJZCgpKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjYXJkLmhhbmRsZURlbGV0ZSgpO1xyXG4gICAgICBkZWxldGVQb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBkZWxldGVQb3B1cC5yZW5kZXJTYXZpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVQaWNTdWJtaXQoZGF0YSkge1xyXG4gIHByb2ZpbGVQaWNQb3B1cC5yZW5kZXJTYXZpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAudXBkYXRlUHJvZmlsZVBpYyhkYXRhKVxyXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICB0aXRsZTogZGF0YS5hYm91dCxcclxuICAgICAgICBhdmF0YXI6IGRhdGEuYXZhdGFyLFxyXG4gICAgICB9KTtcclxuICAgICAgcHJvZmlsZVBpY1BvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHByb2ZpbGVQaWNQb3B1cC5yZW5kZXJTYXZpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZUxpa2UoY2FyZCkge1xyXG4gIGFwaVxyXG4gICAgLnRvZ2dsZUxpa2UoY2FyZC5faWQsIGNhcmQuaXNMaWtlZCgpKVxyXG4gICAgLnRoZW4oKGxpa2VzKSA9PiB7XHJcbiAgICAgIGNhcmQudXBkYXRlTGlrZXMobGlrZXMubGlrZXMpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KTtcclxufVxyXG4iLCJjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZVNlbGVjdG9yLCB0aXRsZVNlbGVjdG9yLCBwcm9maWxlUGljU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRpdGxlU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcHJvZmlsZVBpYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZVBpY1NlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgdXNlck9iaiA9IHtcclxuICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIHRpdGxlOiB0aGlzLl90aXRsZS50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgICByZXR1cm4gdXNlck9iajtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgdGl0bGUsIGF2YXRhciB9KSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG4gICAgdGhpcy5fcHJvZmlsZVBpYy5zcmMgPSBhdmF0YXI7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbztcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltYWdlUG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5faW1hZ2VQb3B1cENhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXB0aW9uXCIpO1xyXG4gICAgdGhpcy5vcGVuID0gdGhpcy5vcGVuLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKHsgbGluaywgbmFtZSB9KSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9pbWFnZVBvcHVwSW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2ltYWdlUG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5faW1hZ2VQb3B1cENhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoRGVsZXRlQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3N1Ym1pdC1idXR0b25cIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xyXG4gIH1cclxuXHJcbiAgb3BlbihjYXJkKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9jYXJkID0gY2FyZDtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9jYXJkKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRGVsZXRlQ29uZmlybTtcclxuIl0sIm5hbWVzIjpbInNldHRpbmdzIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJwYWdlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicG9wdXBQcm9maWxlRm9ybSIsInBvcHVwQWRkRm9ybSIsInBvcHVwUHJvZmlsZVBpY0Zvcm0iLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwiZWRpdFByb2ZpbGVQaWNCdXR0b24iLCJwb3B1cE5hbWUiLCJwb3B1cFRpdGxlIiwiY29uc3RydWN0b3IiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfZm9ybSIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsIl9yZXNldEVycm9yIiwiX2hpZGVJbnB1dEVycm9yIiwicmVtb3ZlIiwic2V0VGltZW91dCIsIl9pc1ZhbGlkIiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsImlucHV0TGlzdCIsImV2ZXJ5IiwiX2Rpc2FibGVCdXR0b24iLCJfYnV0dG9uRWwiLCJkaXNhYmxlZCIsIl9lbmFibGVCdXR0b24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaW5wdXRFbHMiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJDYXJkIiwiZGF0YSIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVUcmFzaEJ1dHRvbkNsaWNrIiwiaGFuZGxlTGlrZUJ1dHRvbiIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfdGVtcGxhdGUiLCJfbGlrZXMiLCJsaWtlcyIsIl9oYW5kbGVUcmFzaEJ1dHRvbkNsaWNrIiwiX293bmVySWQiLCJvd25lciIsIl9pZCIsIl91c2VySWQiLCJ1c2VySWQiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ1cGRhdGVMaWtlcyIsIl9yZW5kZXJMaWtlcyIsIl9saWtlc1RvdGFsIiwibGVuZ3RoIiwiaXNMaWtlZCIsIl9saWtlQnV0dG9uIiwic29tZSIsImxpa2UiLCJfdHJhc2hCdXR0b24iLCJfaW1hZ2VFbCIsImdldENhcmRJZCIsImhhbmRsZURlbGV0ZSIsIl9jYXJkRWwiLCJnZXRWaWV3Iiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwib3BlbiIsImJpbmQiLCJjbG9zZSIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJyZW5kZXJTYXZpbmciLCJpc1NhdmluZyIsImxvYWRpbmdUZXh0IiwiX3N1Ym1pdEJ1dHRvbiIsIl9zdWJtaXRCdXR0b25UZXh0Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJfcG9wdXBDbG9zZUJ1dHRvbiIsInRhcmdldCIsIm1hdGNoZXMiLCJQb3B1cCIsImhhbmRsZVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZVN1Ym1pdCIsIl9pbnB1dHMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsInZhbHVlIiwic2V0QXR0cmlidXRlIiwicmVzZXQiLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfaGFuZGxlUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiaW5pdGlhbGl6ZSIsImFsbCIsImdldFVzZXIiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsInRoZW4iLCJzZXRVc2VySW5mbyIsInRpdGxlIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImFkZENhcmQiLCJkZWxldGVDYXJkIiwiY2FyZElkIiwidG9nZ2xlTGlrZSIsInVwZGF0ZVByb2ZpbGVQaWMiLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIiwicmVuZGVyQ2FyZCIsImNhcmQiLCJuZXdDYXJkIiwiY2FyZExpc3QiLCJhZGRJdGVtIiwiaW1hZ2VQb3B1cCIsImRlbGV0ZVBvcHVwIiwidXNlciIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInVzZXJJbmZvIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwidXNlck5hbWVTZWxlY3RvciIsInRpdGxlU2VsZWN0b3IiLCJwcm9maWxlUGljU2VsZWN0b3IiLCJfdXNlck5hbWUiLCJfdGl0bGUiLCJfcHJvZmlsZVBpYyIsImdldFVzZXJJbmZvIiwic3JjIiwiX2ltYWdlUG9wdXBJbWFnZSIsIl9pbWFnZVBvcHVwQ2FwdGlvbiIsImFsdCIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJlZGl0UG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwiZmluYWxseSIsImhhbmRsZVByb2ZpbGVPcGVuIiwiYWRkUG9wdXAiLCJfY2FyZCIsImUiLCJwcm9maWxlUGljUG9wdXAiXSwic291cmNlUm9vdCI6IiJ9
(()=>{"use strict";const t={inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"},e=class{constructor(t,e){this._form=e,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass}_showInputError(t,e){const s=this._form.querySelector(".".concat(t.id,"-input-error"));t.classList.add(this._inputErrorClass),s.textContent=e,s.classList.add(this._errorClass)}_resetError(t){t.textContent=""}_hideInputError(t){const e=this._form.querySelector(".".concat(t.id,"-input-error"));t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass),setTimeout((()=>this._resetError(e)),100)}_isValid(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}_hasInvalidInput(t){return!t.every((t=>t.validity.valid))}_disableButton(){this._buttonEl.classList.add(this._inactiveButtonClass),this._buttonEl.disabled=!0}_enableButton(){this._buttonEl.classList.remove(this._inactiveButtonClass),this._buttonEl.disabled=!1}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?this._disableButton():this._enableButton()}_setEventListeners(){this._inputEls=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonEl=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((t=>{t.addEventListener("input",(()=>{this._isValid(t),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(t=>{t.preventDefault(),this._disableButton()})),this._setEventListeners()}},s=class{constructor(t){this._popup=document.querySelector(t),this.open=this.open.bind(this),this.close=this.close.bind(this),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add("popup_is-visible"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_is-visible"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(t){"Escape"===t.key&&this.close(this._popup)}setEventListeners(){this._popupCloseButton=this._popup.querySelector(".popup__close"),this._popupCloseButton.addEventListener("click",this.close),document.addEventListener("mousedown",(t=>{t.target.matches(".popup")&&this.close()}))}},i=class extends s{constructor(t,e){super(t),this._form=this._popup.querySelector(".popup__form"),this._handleSubmit=e}_getInputValues(){const t=this._form.querySelectorAll(".popup__input"),e={};return t.forEach((t=>{e[t.name]=t.value})),e}close(){super.close(),this._form.reset()}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(t=>{t.preventDefault(),this._handleSubmit(this._getInputValues())}))}},o=document.querySelector(".page"),n=o.querySelector("#popup-profile"),r=o.querySelector("#popup-add-card"),l=o.querySelector(".profile__edit-button"),a=o.querySelector(".profile__add-button"),u=o.querySelector(".popup__input_type_name"),p=o.querySelector(".popup__input_type_title"),_=t=>{const e=new class{constructor(t,e,s){this._title=t.title,this._link=t.link,this._handleCardClick=s,this._template=e}_getTemplate(){return document.querySelector(this._template).content.querySelector(".card").cloneNode(!0)}_handleLikeButton(){this._likeButton.classList.toggle("card__like_clicked")}_handleTrashButton(){this._cardEl.remove()}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeButton()})),this._trashButton.addEventListener("click",(()=>{this._handleTrashButton()})),this._imageEl.addEventListener("click",(()=>{this._handleCardClick()}))}getView(){return this._cardEl=this._getTemplate(),this._likeButton=this._cardEl.querySelector(".card__like"),this._trashButton=this._cardEl.querySelector(".card__trash"),this._imageEl=this._cardEl.querySelector(".card__image"),this._cardEl.querySelector(".card__title").textContent=this._title,this._imageEl.style.backgroundImage="url(".concat(this._link,")"),this._setEventListeners(),this._cardEl}}(t,"#card-template",(()=>{d.open(t)}));c.addItem(e.getView())},c=new class{constructor(t,e){let{items:s,renderer:i}=t;this._items=s,this._renderer=i,this._container=document.querySelector(e)}renderItems(){this._items.forEach((t=>{this._renderer(t)}))}addItem(t){this._container.prepend(t)}}({items:[{title:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{title:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{title:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{title:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{title:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{title:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:_},".elements");c.renderItems();const h=new class{constructor(t){let{userNameSelector:e,titleSelector:s}=t;this._userName=document.querySelector(e),this._title=document.querySelector(s)}getUserInfo(){return{name:this._userName.textContent,title:this._title.textContent}}setUserInfo(t){let{name:e,title:s}=t;this._userName.textContent=e,this._title.textContent=s}}({userNameSelector:".profile__name",titleSelector:".profile__description"}),d=new class extends s{constructor(t){super(t),this._imagePopupImage=this._popup.querySelector(".popup__image"),this._imagePopupCaption=this._popup.querySelector(".popup__caption"),this.open=this.open.bind(this)}open(t){let{link:e,title:s}=t;super.open(),this._imagePopupImage.src=e,this._imagePopupImage.alt=s,this._imagePopupCaption.textContent=s}}(".popup_type_image");d.setEventListeners();const m=new e(t,n),E=new e(t,r);m.enableValidation(),E.enableValidation();const v=new i(".popup_type_edit",(t=>{h.setUserInfo(t),v.close()}));v.setEventListeners(),l.addEventListener("click",(()=>{const{name:t,title:e}=h.getUserInfo();u.value=t,p.value=e,v.open()}));const y=new i(".popup_type_add",(t=>{_(t),y.close()}));y.setEventListeners(),a.addEventListener("click",y.open)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBS0MsS0FBSzlDLEtBQzVCLENBRUQ2QyxLQUFLLEdBQWlCLElBQWpCLEtBQUVvQyxFQUFGLE1BQVFGLEdBQVMsRUFDcEJ0QixNQUFNWixPQUNON0MsS0FBS29ILGlCQUFpQkUsSUFBTXJDLEVBQzVCakYsS0FBS29ILGlCQUFpQkcsSUFBTXhDLEVBQzVCL0UsS0FBS3FILG1CQUFtQnRHLFlBQWNnRSxDQUN2QyxHSndDbUMscUJBQ3RDa0IsRUFBVzlDLG9CQUVYLE1BQU1xRSxFQUFvQixJQUFJQyxFQUFjakksRUFBVTBFLEdBQ2hEd0QsRUFBbUIsSUFBSUQsRUFBY2pJLEVBQVUyRSxHQUNyRHFELEVBQWtCakYsbUJBQ2xCbUYsRUFBaUJuRixtQkFFakIsTUFBTW9GLEVBQVksSUFBSUMsRUFBYyxvQkFBcUJqRCxJQUN2RG1DLEVBQVNLLFlBQVl4QyxHQUNyQmdELEVBQVU1RSxPQUFWLElBRUY0RSxFQUFVeEUsb0JBQ1ZpQixFQUFXOUIsaUJBQWlCLFNBQVMsS0FDbkMsTUFBTSxLQUFFd0IsRUFBRixNQUFRaUIsR0FBVStCLEVBQVNJLGNBQ2pDNUMsRUFBVVAsTUFBUUQsRUFDbEJTLEVBQVdSLE1BQVFnQixFQUNuQjRDLEVBQVU5RSxNQUFWLElBR0YsTUFBTWdGLEVBQVcsSUFBSUQsRUFBYyxtQkFBb0JqRCxJQUNyREgsRUFBV0csR0FDWGtELEVBQVM5RSxPQUFULElBRUY4RSxFQUFTMUUsb0JBQ1RrQixFQUFVL0IsaUJBQWlCLFFBQVN1RixFQUFTaEYsSyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIHRpdGxlOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICB0aXRsZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICB0aXRsZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dC1lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG5leHBvcnQgeyBpbml0aWFsQ2FyZHMsIHNldHRpbmdzIH07XHJcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsLCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbC5pZH0taW5wdXQtZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfcmVzZXRFcnJvcihlcnJvckVsZW1lbnQpIHtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsLmlkfS1pbnB1dC1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIC8vIHRpbWUgZGVsYXkgdG8gYWxsb3cgY3NzIHRyYW5zaXRpb24gdG8gc2hvdyBlZmZlY3RcclxuICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5fcmVzZXRFcnJvcihlcnJvckVsZW1lbnQpLCAxMDApO1xyXG4gIH1cclxuXHJcbiAgX2lzVmFsaWQoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwsIGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xyXG4gICAgcmV0dXJuICFpbnB1dExpc3QuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX2Rpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9idXR0b25FbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWwuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dEVscykpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faXNWYWxpZChpbnB1dEVsKTtcclxuXHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLm9wZW4gPSB0aGlzLm9wZW4uYmluZCh0aGlzKTtcclxuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX2lzLXZpc2libGVcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9pcy12aXNpYmxlXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSh0aGlzLl9wb3B1cCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZVwiKTtcclxuICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0Lm1hdGNoZXMoXCIucG9wdXBcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dEVscyA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgaW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dEVsLm5hbWVdID0gaW5wdXRFbC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRm9ybTtcclxuIiwiaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBzZXR0aW5ncyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcmFwcGVycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5jb25zdCBwYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wYWdlXCIpO1xyXG5jb25zdCBwb3B1cFByb2ZpbGVGb3JtID0gcGFnZS5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLXByb2ZpbGVcIik7XHJcbmNvbnN0IHBvcHVwQWRkRm9ybSA9IHBhZ2UucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1hZGQtY2FyZFwiKTtcclxuY29uc3QgY2FyZEVsZW1lbnRzID0gXCIuZWxlbWVudHNcIjtcclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJ1dHRvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuY29uc3QgZWRpdEJ1dHRvbiA9IHBhZ2UucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgYWRkQnV0dG9uID0gcGFnZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbnB1dHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmNvbnN0IHByb2ZpbGVOYW1lU2VsZWN0b3IgPSBcIi5wcm9maWxlX19uYW1lXCI7XHJcbmNvbnN0IHByb2ZpbGVUaXRsZVNlbGVjdG9yID0gXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIjtcclxuY29uc3QgcG9wdXBOYW1lID0gcGFnZS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX25hbWVcIik7XHJcbmNvbnN0IHBvcHVwVGl0bGUgPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X3R5cGVfdGl0bGVcIik7XHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRlbXBsYXRlcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5jb25zdCBjYXJkVGVtcGxhdGVTZWxlY3RvciA9IFwiI2NhcmQtdGVtcGxhdGVcIjtcclxuXHJcbmNvbnN0IHJlbmRlckNhcmQgPSAoY2FyZCkgPT4ge1xyXG4gIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChjYXJkLCBjYXJkVGVtcGxhdGVTZWxlY3RvciwgKCkgPT4ge1xyXG4gICAgaW1hZ2VQb3B1cC5vcGVuKGNhcmQpO1xyXG4gIH0pO1xyXG4gIGNhcmRMaXN0LmFkZEl0ZW0obmV3Q2FyZC5nZXRWaWV3KCkpO1xyXG59O1xyXG5cclxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IHJlbmRlckNhcmQsXHJcbiAgfSxcclxuICBjYXJkRWxlbWVudHNcclxuKTtcclxuY2FyZExpc3QucmVuZGVySXRlbXMoKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICB1c2VyTmFtZVNlbGVjdG9yOiBwcm9maWxlTmFtZVNlbGVjdG9yLFxyXG4gIHRpdGxlU2VsZWN0b3I6IHByb2ZpbGVUaXRsZVNlbGVjdG9yLFxyXG59KTtcclxuXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZV9pbWFnZVwiKTtcclxuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgcG9wdXBQcm9maWxlRm9ybSk7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgcG9wdXBBZGRGb3JtKTtcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3R5cGVfZWRpdFwiLCAoZGF0YSkgPT4ge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xyXG4gIGVkaXRQb3B1cC5jbG9zZSgpO1xyXG59KTtcclxuZWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCB7IG5hbWUsIHRpdGxlIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHBvcHVwTmFtZS52YWx1ZSA9IG5hbWU7XHJcbiAgcG9wdXBUaXRsZS52YWx1ZSA9IHRpdGxlO1xyXG4gIGVkaXRQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgYWRkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX2FkZFwiLCAoZGF0YSkgPT4ge1xyXG4gIHJlbmRlckNhcmQoZGF0YSk7XHJcbiAgYWRkUG9wdXAuY2xvc2UoKTtcclxufSk7XHJcbmFkZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYWRkUG9wdXAub3Blbik7XHJcbiIsImNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIHRlbXBsYXRlU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xyXG4gICAgdGhpcy5fdGl0bGUgPSBkYXRhLnRpdGxlO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX3RlbXBsYXRlID0gdGVtcGxhdGVTZWxlY3RvcjtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZSlcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2VfY2xpY2tlZFwiKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVUcmFzaEJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2NhcmRFbC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fdHJhc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlVHJhc2hCdXR0b24oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2ltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWwgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWwucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlXCIpO1xyXG4gICAgdGhpcy5fdHJhc2hCdXR0b24gPSB0aGlzLl9jYXJkRWwucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaFwiKTtcclxuICAgIHRoaXMuX2ltYWdlRWwgPSB0aGlzLl9jYXJkRWwucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWwucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX3RpdGxlO1xyXG4gICAgdGhpcy5faW1hZ2VFbC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dGhpcy5fbGlua30pYDtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWw7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xyXG4iLCJjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XHJcbiIsImNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lU2VsZWN0b3IsIHRpdGxlU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRpdGxlU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCB1c2VyT2JqID0ge1xyXG4gICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgdGl0bGU6IHRoaXMuX3RpdGxlLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICAgIHJldHVybiB1c2VyT2JqO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCB0aXRsZSB9KSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZVBvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2ltYWdlUG9wdXBDYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FwdGlvblwiKTtcclxuICAgIHRoaXMub3BlbiA9IHRoaXMub3Blbi5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3Blbih7IGxpbmssIHRpdGxlIH0pIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX2ltYWdlUG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5faW1hZ2VQb3B1cEltYWdlLmFsdCA9IHRpdGxlO1xyXG4gICAgdGhpcy5faW1hZ2VQb3B1cENhcHRpb24udGV4dENvbnRlbnQgPSB0aXRsZTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlO1xyXG4iXSwibmFtZXMiOlsic2V0dGluZ3MiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImNvbnN0cnVjdG9yIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2Zvcm0iLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwiX3Jlc2V0RXJyb3IiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJzZXRUaW1lb3V0IiwiX2lzVmFsaWQiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0IiwiaW5wdXRMaXN0IiwiZXZlcnkiLCJfZGlzYWJsZUJ1dHRvbiIsIl9idXR0b25FbCIsImRpc2FibGVkIiwiX2VuYWJsZUJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9pbnB1dEVscyIsIl9zZXRFdmVudExpc3RlbmVycyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJkb2N1bWVudCIsIm9wZW4iLCJiaW5kIiwiY2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJfcG9wdXBDbG9zZUJ1dHRvbiIsInRhcmdldCIsIm1hdGNoZXMiLCJQb3B1cCIsImhhbmRsZVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0RWxzIiwiaW5wdXRWYWx1ZXMiLCJuYW1lIiwidmFsdWUiLCJyZXNldCIsInBhZ2UiLCJwb3B1cFByb2ZpbGVGb3JtIiwicG9wdXBBZGRGb3JtIiwiZWRpdEJ1dHRvbiIsImFkZEJ1dHRvbiIsInBvcHVwTmFtZSIsInBvcHVwVGl0bGUiLCJyZW5kZXJDYXJkIiwiY2FyZCIsIm5ld0NhcmQiLCJkYXRhIiwidGVtcGxhdGVTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsIl90aXRsZSIsInRpdGxlIiwiX2xpbmsiLCJsaW5rIiwiX2hhbmRsZUNhcmRDbGljayIsIl90ZW1wbGF0ZSIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9saWtlQnV0dG9uIiwidG9nZ2xlIiwiX2hhbmRsZVRyYXNoQnV0dG9uIiwiX2NhcmRFbCIsIl90cmFzaEJ1dHRvbiIsIl9pbWFnZUVsIiwiZ2V0VmlldyIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiaW1hZ2VQb3B1cCIsImNhcmRMaXN0IiwiYWRkSXRlbSIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInRpdGxlU2VsZWN0b3IiLCJfdXNlck5hbWUiLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwiX2ltYWdlUG9wdXBJbWFnZSIsIl9pbWFnZVBvcHVwQ2FwdGlvbiIsInNyYyIsImFsdCIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJlZGl0UG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwiYWRkUG9wdXAiXSwic291cmNlUm9vdCI6IiJ9
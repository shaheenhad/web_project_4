(()=>{"use strict";const e={inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"},t=document.querySelector(".page"),s=t.querySelector("#popup-profile"),i=t.querySelector("#popup-add-card"),n=t.querySelector("#popup-profile-pic"),r=t.querySelector(".profile__edit-button"),o=t.querySelector(".profile__add-button"),a=t.querySelector(".profile__image-container"),l=t.querySelector(".popup__input_type_name"),h=t.querySelector(".popup__input_type_title"),_=class{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputError(e,t){const s=this._form.querySelector(".".concat(e.id,"-input-error"));e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)}_resetError(e){e.textContent=""}_hideInputError(e){const t=this._form.querySelector(".".concat(e.id,"-input-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),setTimeout((()=>this._resetError(t)),100)}_isValid(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}_disableButton(){this._buttonEl.classList.add(this._inactiveButtonClass),this._buttonEl.disabled=!0}_enableButton(){this._buttonEl.classList.remove(this._inactiveButtonClass),this._buttonEl.disabled=!1}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?this._disableButton():this._enableButton()}_setEventListeners(){this._inputEls=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonEl=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._isValid(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._toggleButtonState()})),this._setEventListeners()}};class c{constructor(e,t,s,i,n){this._name=e.name,this._link=e.link,this._handleCardClick=s,this._template=t,this._likes=e.likes,this._handleTrashButtonClick=i,this._ownerId=e.owner._id,this._userId=e.userId,this._id=e._id,this._handleLikeButton=n}_getTemplate(){return document.querySelector(this._template).content.querySelector(".card").cloneNode(!0)}updateLikes(e){this._likes=e,this._renderLikes()}_renderLikes(){this._likesTotal.textContent=this._likes.length,this.isLiked()?this._likeButton.classList.add("card__like_clicked"):this._likeButton.classList.remove("card__like_clicked")}isLiked(){return this._likes.some((e=>e._id===this._userId))}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeButton(this)})),this._trashButton.addEventListener("click",(()=>{this._handleTrashButtonClick(this)})),this._imageEl.addEventListener("click",(()=>{this._handleCardClick({link:this._link,name:this._name})}))}getCardId(){return this._id}handleDelete(){this._cardEl.remove(),this._cardEl=null}getView(){return this._cardEl=this._getTemplate(),this._likeButton=this._cardEl.querySelector(".card__like"),this._trashButton=this._cardEl.querySelector(".card__trash"),this._imageEl=this._cardEl.querySelector(".card__image"),this._likesTotal=this._cardEl.querySelector(".card__like-num"),this._cardEl.querySelector(".card__title").textContent=this._name,this._imageEl.style.backgroundImage="url(".concat(this._link,")"),this._renderLikes(),this._ownerId!==this._userId&&this._trashButton.remove(),this._setEventListeners(),this._cardEl}}const u=class{constructor(e){this._popup=document.querySelector(e),this.open=this.open.bind(this),this.close=this.close.bind(this),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add("popup_is-visible"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_is-visible"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close(this._popup)}renderSaving(e,t){e?this._submitButton.textContent="Saving...":"edit"===t?this._submitButton.textContent="Save":"add"===t?this._submitButton.textContent="Create":"delete"===t&&(this._submitButton.textContent="Yes")}setEventListeners(){this._popupCloseButton=this._popup.querySelector(".popup__close"),this._popupCloseButton.addEventListener("click",this.close),document.addEventListener("mousedown",(e=>{e.target.matches(".popup")&&this.close()}))}},d=class extends u{constructor(e,t){super(e),this._form=this._popup.querySelector(".popup__form"),this._handleSubmit=t,this._submitButton=this._form.querySelector(".popup__submit-button")}_getInputValues(){const e=this._form.querySelectorAll(".popup__input"),t={};return e.forEach((e=>{t[e.name]=e.value})),t}close(){super.close()}renderSaving(e,t){super.renderSaving(e,t)}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues()),this._form.reset()}))}},p=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_handleResponse(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}initialize(){return Promise.all([this.getUser(),this.getInitialCards()])}getInitialCards(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((e=>this._handleResponse(e)))}getUser(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((e=>this._handleResponse(e)))}setUserInfo(e){let{name:t,title:s}=e;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then((e=>this._handleResponse(e)))}addCard(e){let{name:t,link:s}=e;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then((e=>this._handleResponse(e)))}deleteCard(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((e=>this._handleResponse(e)))}toggleLike(e,t){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:t?"DELETE":"PUT",headers:this._headers}).then((e=>this._handleResponse(e)))}updateProfilePic(e){let{avatar:t}=e;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((e=>this._handleResponse(e)))}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"233760b2-865b-418c-a988-0a5daaaf7846","Content-Type":"application/json"}}),m=e=>{const t=new c(e,"#card-template",v,E,q);S.addItem(t.getView())};function v(e){f.open(e)}function E(e){I.open(e)}let S,b;p.initialize().then((e=>{const[t,s]=e;S=new class{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:s,renderer:e=>{b=t._id,m({name:e.name,link:e.link,likes:e.likes,owner:e.owner,_id:e._id,userId:b})}},".elements"),S.renderItems(),g.setUserInfo({name:t.name,title:t.about,avatar:t.avatar})})).catch((e=>{console.log(e)}));const g=new class{constructor(e){let{userNameSelector:t,titleSelector:s,profilePicSelector:i}=e;this._userName=document.querySelector(t),this._title=document.querySelector(s),this._profilePic=document.querySelector(i)}getUserInfo(){return{name:this._userName.textContent,title:this._title.textContent}}setUserInfo(e){let{name:t,title:s,avatar:i}=e;this._userName.textContent=t,this._title.textContent=s,this._profilePic.src=i}}({userNameSelector:".profile__name",titleSelector:".profile__description",profilePicSelector:".profile__image"}),f=new class extends u{constructor(e){super(e),this._imagePopupImage=this._popup.querySelector(".popup__image"),this._imagePopupCaption=this._popup.querySelector(".popup__caption"),this.open=this.open.bind(this)}open(e){let{link:t,name:s}=e;super.open(),this._imagePopupImage.src=t,this._imagePopupImage.alt=s,this._imagePopupCaption.textContent=s}}(".popup_type_image");f.setEventListeners();const k=new _(e,s),y=new _(e,i);new _(e,n).enableValidation(),k.enableValidation(),y.enableValidation();const C=new d(".popup_type_edit",(function(e){C.renderSaving(!0),p.setUserInfo(e).then((e=>{g.setUserInfo({name:e.name,title:e.about,avatar:e.avatar}),C.close()})).catch((e=>{console.log(e)})).finally((()=>{C.renderSaving(!1,"edit")}))}));C.setEventListeners(),r.addEventListener("click",(()=>{!function(){const{name:e,title:t}=g.getUserInfo();l.value=e,h.value=t,C.open()}()}));const L=new d(".popup_type_add",(function(e){L.renderSaving(!0),p.addCard(e).then((e=>{m({name:e.name,link:e.link,likes:e.likes,owner:e.owner,_id:e._id,userId:b})})).catch((e=>{console.log(e)})).finally((()=>{L.renderSaving(!1,"add"),L.close()}))}));L.setEventListeners(),o.addEventListener("click",L.open);const I=new class extends u{constructor(e,t){super(e),this._form=this._popup.querySelector(".popup__form"),this._handleSubmit=t,this._submitButton=this._form.querySelector(".popup__submit-button")}open(e){super.open(),this._card=e}renderSaving(e,t){super.renderSaving(e,t)}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._card)}))}}(".popup_type_delete",(function(e){I.renderSaving(!0),p.deleteCard(e.getCardId()).then((()=>{e.handleDelete()})).catch((e=>{console.log(e)})).finally((()=>{I.renderSaving(!1,"delete"),I.close()}))}));I.setEventListeners();const B=new d(".popup_type_edit-profile-pic",(function(e){B.renderSaving(!0),p.updateProfilePic(e).then((e=>{g.setUserInfo({name:e.name,title:e.about,avatar:e.avatar}),B.close()})).catch((e=>{console.log(e)})).finally((()=>{B.renderSaving(!1,"edit")}))}));function q(e){p.toggleLike(e._id,e.isLiked()).then((t=>{e.updateLikes(t.likes)})).catch((e=>{console.log(e)}))}B.setEventListeners(),a.addEventListener("click",(()=>{B.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FFTCxJQTNFRDJELEVBQVluRCxvQkFFWixNQUFNeUYsRUFBa0IsSUFBSU4sRUFDMUIsZ0NBMEVGLFNBQWdDdEksR0FDOUI0SSxFQUFnQjdGLGNBQWEsR0FDN0JpQixFQUFBQSxpQkFDb0JoRSxHQUNqQmlGLE1BQU1qRixJQUNMa0gsRUFBU2hDLFlBQVksQ0FDbkI1RSxLQUFNTixFQUFLTSxLQUNYNkUsTUFBT25GLEVBQUt3RixNQUNaTSxPQUFROUYsRUFBSzhGLFNBRWY4QyxFQUFnQmpHLE9BQWhCLElBRUR3RSxPQUFPQyxJQUNOQyxRQUFRQyxJQUFJRixFQUFaLElBRURtQixTQUFRLEtBQ1BLLEVBQWdCN0YsY0FBYSxFQUFPLE9BQXBDLEdBRUwsSUFFRCxTQUFTNkMsRUFBV0ssR0FDbEJqQyxFQUFBQSxXQUNjaUMsRUFBS2pGLElBQUtpRixFQUFLdEUsV0FDMUJzRCxNQUFNckUsSUFDTHFGLEVBQUsxRSxZQUFZWCxFQUFNQSxNQUF2QixJQUVEdUcsT0FBT0MsSUFDTkMsUUFBUUMsSUFBSUYsRUFBWixHQUVMLENBcEdEd0IsRUFBZ0J6RixvQkFDaEJsRyxFQUFxQjBDLGlCQUFpQixTQUFTLEtBQzdDaUosRUFBZ0JuRyxNQUFoQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGVDb25maXJtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dC1lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcmFwcGVycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5jb25zdCBwYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wYWdlXCIpO1xyXG5jb25zdCBwb3B1cFByb2ZpbGVGb3JtID0gcGFnZS5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLXByb2ZpbGVcIik7XHJcbmNvbnN0IHBvcHVwQWRkRm9ybSA9IHBhZ2UucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1hZGQtY2FyZFwiKTtcclxuY29uc3QgcG9wdXBQcm9maWxlUGljRm9ybSA9IHBhZ2UucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1wcm9maWxlLXBpY1wiKTtcclxuY29uc3QgY2FyZEVsZW1lbnRzU2VsZWN0b3IgPSBcIi5lbGVtZW50c1wiO1xyXG5jb25zdCBwcm9maWxlUGljU2VsZWN0b3IgPSBcIi5wcm9maWxlX19pbWFnZVwiO1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5jb25zdCBlZGl0QnV0dG9uID0gcGFnZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBhZGRCdXR0b24gPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgZWRpdFByb2ZpbGVQaWNCdXR0b24gPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2UtY29udGFpbmVyXCIpO1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5wdXRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5jb25zdCBwcm9maWxlTmFtZVNlbGVjdG9yID0gXCIucHJvZmlsZV9fbmFtZVwiO1xyXG5jb25zdCBwcm9maWxlVGl0bGVTZWxlY3RvciA9IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCI7XHJcbmNvbnN0IHBvcHVwTmFtZSA9IHBhZ2UucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfdHlwZV9uYW1lXCIpO1xyXG5jb25zdCBwb3B1cFRpdGxlID0gcGFnZS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX3RpdGxlXCIpO1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZW1wbGF0ZXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuY29uc3QgY2FyZFRlbXBsYXRlU2VsZWN0b3IgPSBcIiNjYXJkLXRlbXBsYXRlXCI7XHJcblxyXG5leHBvcnQge1xyXG4gIHNldHRpbmdzLFxyXG4gIHBvcHVwUHJvZmlsZUZvcm0sXHJcbiAgcG9wdXBBZGRGb3JtLFxyXG4gIHBvcHVwUHJvZmlsZVBpY0Zvcm0sXHJcbiAgY2FyZEVsZW1lbnRzU2VsZWN0b3IsXHJcbiAgZWRpdEJ1dHRvbixcclxuICBhZGRCdXR0b24sXHJcbiAgZWRpdFByb2ZpbGVQaWNCdXR0b24sXHJcbiAgcHJvZmlsZU5hbWVTZWxlY3RvcixcclxuICBwcm9maWxlVGl0bGVTZWxlY3RvcixcclxuICBwb3B1cE5hbWUsXHJcbiAgcHJvZmlsZVBpY1NlbGVjdG9yLFxyXG4gIHBvcHVwVGl0bGUsXHJcbiAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXHJcbn07XHJcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsLCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbC5pZH0taW5wdXQtZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfcmVzZXRFcnJvcihlcnJvckVsZW1lbnQpIHtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsLmlkfS1pbnB1dC1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIC8vIHRpbWUgZGVsYXkgdG8gYWxsb3cgY3NzIHRyYW5zaXRpb24gdG8gc2hvdyBlZmZlY3RcclxuICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5fcmVzZXRFcnJvcihlcnJvckVsZW1lbnQpLCAxMDApO1xyXG4gIH1cclxuXHJcbiAgX2lzVmFsaWQoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwsIGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xyXG4gICAgcmV0dXJuICFpbnB1dExpc3QuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX2Rpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9idXR0b25FbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWwuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dEVscykpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2lzVmFsaWQoaW5wdXRFbCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXRhLFxyXG4gICAgdGVtcGxhdGVTZWxlY3RvcixcclxuICAgIGhhbmRsZUNhcmRDbGljayxcclxuICAgIGhhbmRsZVRyYXNoQnV0dG9uQ2xpY2ssXHJcbiAgICBoYW5kbGVMaWtlQnV0dG9uXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX3RlbXBsYXRlID0gdGVtcGxhdGVTZWxlY3RvcjtcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX2hhbmRsZVRyYXNoQnV0dG9uQ2xpY2sgPSBoYW5kbGVUcmFzaEJ1dHRvbkNsaWNrO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xyXG4gICAgdGhpcy5fdXNlcklkID0gZGF0YS51c2VySWQ7XHJcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbiA9IGhhbmRsZUxpa2VCdXR0b247XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGUpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlTGlrZXMobGlrZXMpIHtcclxuICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG4gIH1cclxuXHJcbiAgX3JlbmRlckxpa2VzKCkge1xyXG4gICAgdGhpcy5fbGlrZXNUb3RhbC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlX2NsaWNrZWRcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlX2NsaWNrZWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpc0xpa2VkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2xpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSB0aGlzLl91c2VySWQpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fdHJhc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlVHJhc2hCdXR0b25DbGljayh0aGlzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2ltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHsgbGluazogdGhpcy5fbGluaywgbmFtZTogdGhpcy5fbmFtZSB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlRGVsZXRlKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsLnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWwgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWwucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlXCIpO1xyXG4gICAgdGhpcy5fdHJhc2hCdXR0b24gPSB0aGlzLl9jYXJkRWwucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaFwiKTtcclxuICAgIHRoaXMuX2ltYWdlRWwgPSB0aGlzLl9jYXJkRWwucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2xpa2VzVG90YWwgPSB0aGlzLl9jYXJkRWwucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLW51bVwiKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWwucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9pbWFnZUVsLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt0aGlzLl9saW5rfSlgO1xyXG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcclxuICAgIGlmICh0aGlzLl9vd25lcklkICE9PSB0aGlzLl91c2VySWQpIHtcclxuICAgICAgdGhpcy5fdHJhc2hCdXR0b24ucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsO1xyXG4gIH1cclxufVxyXG4iLCJjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XHJcbiIsImNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLm9wZW4gPSB0aGlzLm9wZW4uYmluZCh0aGlzKTtcclxuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX2lzLXZpc2libGVcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9pcy12aXNpYmxlXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSh0aGlzLl9wb3B1cCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXJTYXZpbmcoaXNTYXZpbmcsIGZvcm1UeXBlKSB7XHJcbiAgICBpZiAoaXNTYXZpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgIH0gZWxzZSBpZiAoZm9ybVR5cGUgPT09IFwiZWRpdFwiKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgfSBlbHNlIGlmIChmb3JtVHlwZSA9PT0gXCJhZGRcIikge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIkNyZWF0ZVwiO1xyXG4gICAgfSBlbHNlIGlmIChmb3JtVHlwZSA9PT0gXCJkZWxldGVcIikge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlllc1wiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIik7XHJcbiAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5tYXRjaGVzKFwiLnBvcHVwXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zdWJtaXQtYnV0dG9uXCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRFbHMgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIGlucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXRFbC5uYW1lXSA9IGlucHV0RWwudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIHJlbmRlclNhdmluZyhpc1NhdmluZywgZm9ybVR5cGUpIHtcclxuICAgIHN1cGVyLnJlbmRlclNhdmluZyhpc1NhdmluZywgZm9ybVR5cGUpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xyXG4iLCJjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVJlc3BvbnNlKHJlcykge1xyXG4gICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGluaXRpYWxpemUoKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0VXNlcigpLCB0aGlzLmdldEluaXRpYWxDYXJkcygpXSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlcigpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKSk7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIHRpdGxlIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGFib3V0OiB0aXRsZSxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUxpa2UoaWQsIGlzTGlrZWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2lkfWAsIHtcclxuICAgICAgbWV0aG9kOiBpc0xpa2VkID8gXCJERUxFVEVcIiA6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlUHJvZmlsZVBpYyh7IGF2YXRhciB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcixcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiMjMzNzYwYjItODY1Yi00MThjLWE5ODgtMGE1ZGFhYWY3ODQ2XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuIiwiaW1wb3J0IHtcclxuICBzZXR0aW5ncyxcclxuICBwb3B1cFByb2ZpbGVGb3JtLFxyXG4gIHBvcHVwQWRkRm9ybSxcclxuICBwb3B1cFByb2ZpbGVQaWNGb3JtLFxyXG4gIGNhcmRFbGVtZW50c1NlbGVjdG9yLFxyXG4gIGVkaXRCdXR0b24sXHJcbiAgYWRkQnV0dG9uLFxyXG4gIGVkaXRQcm9maWxlUGljQnV0dG9uLFxyXG4gIHByb2ZpbGVOYW1lU2VsZWN0b3IsXHJcbiAgcHJvZmlsZVRpdGxlU2VsZWN0b3IsXHJcbiAgcG9wdXBOYW1lLFxyXG4gIHBvcHVwVGl0bGUsXHJcbiAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXHJcbiAgcHJvZmlsZVBpY1NlbGVjdG9yLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7IGFwaSB9IGZyb20gXCIuLi9jb21wb25lbnRzL0FwaVwiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRGVsZXRlQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGVDb25maXJtLmpzXCI7XHJcblxyXG5jb25zdCByZW5kZXJDYXJkID0gKGNhcmQpID0+IHtcclxuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoXHJcbiAgICBjYXJkLFxyXG4gICAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXHJcbiAgICBoYW5kbGVUcmFzaEJ1dHRvbkNsaWNrLFxyXG4gICAgdG9nZ2xlTGlrZVxyXG4gICk7XHJcbiAgY2FyZExpc3QuYWRkSXRlbShuZXdDYXJkLmdldFZpZXcoKSk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2soY2FyZCkge1xyXG4gIGltYWdlUG9wdXAub3BlbihjYXJkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlVHJhc2hCdXR0b25DbGljayhjYXJkKSB7XHJcbiAgZGVsZXRlUG9wdXAub3BlbihjYXJkKTtcclxufVxyXG5cclxubGV0IGNhcmRMaXN0O1xyXG5sZXQgdXNlcklkO1xyXG5hcGlcclxuICAuaW5pdGlhbGl6ZSgpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgY29uc3QgW3VzZXIsIGRhdGFdID0gcmVzO1xyXG5cclxuICAgIGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgIHtcclxuICAgICAgICBpdGVtczogZGF0YSxcclxuICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgICAgIHVzZXJJZCA9IHVzZXIuX2lkO1xyXG4gICAgICAgICAgcmVuZGVyQ2FyZCh7XHJcbiAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcclxuICAgICAgICAgICAgbGluazogaXRlbS5saW5rLFxyXG4gICAgICAgICAgICBsaWtlczogaXRlbS5saWtlcyxcclxuICAgICAgICAgICAgb3duZXI6IGl0ZW0ub3duZXIsXHJcbiAgICAgICAgICAgIF9pZDogaXRlbS5faWQsXHJcbiAgICAgICAgICAgIHVzZXJJZCxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIGNhcmRFbGVtZW50c1NlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgY2FyZExpc3QucmVuZGVySXRlbXMoKTtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgbmFtZTogdXNlci5uYW1lLFxyXG4gICAgICB0aXRsZTogdXNlci5hYm91dCxcclxuICAgICAgYXZhdGFyOiB1c2VyLmF2YXRhcixcclxuICAgIH0pO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgfSk7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgdXNlck5hbWVTZWxlY3RvcjogcHJvZmlsZU5hbWVTZWxlY3RvcixcclxuICB0aXRsZVNlbGVjdG9yOiBwcm9maWxlVGl0bGVTZWxlY3RvcixcclxuICBwcm9maWxlUGljU2VsZWN0b3I6IHByb2ZpbGVQaWNTZWxlY3RvcixcclxufSk7XHJcblxyXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwX3R5cGVfaW1hZ2VcIik7XHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIGludGlhbGl6ZSBmb3JtIHZhbGlkYXRpb25cclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgcG9wdXBQcm9maWxlRm9ybSk7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgcG9wdXBBZGRGb3JtKTtcclxuY29uc3QgcHJvZmlsZVBpY0Zvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBzZXR0aW5ncyxcclxuICBwb3B1cFByb2ZpbGVQaWNGb3JtXHJcbik7XHJcbnByb2ZpbGVQaWNGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3R5cGVfZWRpdFwiLCBoYW5kbGVQcm9maWxlU3VibWl0KTtcclxuZWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBoYW5kbGVQcm9maWxlT3BlbigpO1xyXG59KTtcclxuXHJcbmNvbnN0IGFkZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfdHlwZV9hZGRcIiwgaGFuZGxlTmV3Q2FyZFN1Ym1pdCk7XHJcbmFkZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYWRkUG9wdXAub3Blbik7XHJcblxyXG5jb25zdCBkZWxldGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhEZWxldGVDb25maXJtKFxyXG4gIFwiLnBvcHVwX3R5cGVfZGVsZXRlXCIsXHJcbiAgaGFuZGxlQ29uZmlybURlbGV0ZVxyXG4pO1xyXG5kZWxldGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcHJvZmlsZVBpY1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIucG9wdXBfdHlwZV9lZGl0LXByb2ZpbGUtcGljXCIsXHJcbiAgaGFuZGxlUHJvZmlsZVBpY1N1Ym1pdFxyXG4pO1xyXG5wcm9maWxlUGljUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZWRpdFByb2ZpbGVQaWNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwcm9maWxlUGljUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVTdWJtaXQoZGF0YSkge1xyXG4gIGVkaXRQb3B1cC5yZW5kZXJTYXZpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuc2V0VXNlckluZm8oZGF0YSlcclxuICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgdGl0bGU6IGRhdGEuYWJvdXQsXHJcbiAgICAgICAgYXZhdGFyOiBkYXRhLmF2YXRhcixcclxuICAgICAgfSk7XHJcbiAgICAgIGVkaXRQb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBlZGl0UG9wdXAucmVuZGVyU2F2aW5nKGZhbHNlLCBcImVkaXRcIik7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZU9wZW4oKSB7XHJcbiAgY29uc3QgeyBuYW1lLCB0aXRsZSB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBwb3B1cE5hbWUudmFsdWUgPSBuYW1lO1xyXG4gIHBvcHVwVGl0bGUudmFsdWUgPSB0aXRsZTtcclxuICBlZGl0UG9wdXAub3BlbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVOZXdDYXJkU3VibWl0KGRhdGEpIHtcclxuICBhZGRQb3B1cC5yZW5kZXJTYXZpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuYWRkQ2FyZChkYXRhKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZW5kZXJDYXJkKHtcclxuICAgICAgICBuYW1lOiByZXMubmFtZSxcclxuICAgICAgICBsaW5rOiByZXMubGluayxcclxuICAgICAgICBsaWtlczogcmVzLmxpa2VzLFxyXG4gICAgICAgIG93bmVyOiByZXMub3duZXIsXHJcbiAgICAgICAgX2lkOiByZXMuX2lkLFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgfSk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGFkZFBvcHVwLnJlbmRlclNhdmluZyhmYWxzZSwgXCJhZGRcIik7XHJcbiAgICAgIGFkZFBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ29uZmlybURlbGV0ZShjYXJkKSB7XHJcbiAgZGVsZXRlUG9wdXAucmVuZGVyU2F2aW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmRlbGV0ZUNhcmQoY2FyZC5nZXRDYXJkSWQoKSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgY2FyZC5oYW5kbGVEZWxldGUoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgZGVsZXRlUG9wdXAucmVuZGVyU2F2aW5nKGZhbHNlLCBcImRlbGV0ZVwiKTtcclxuICAgICAgZGVsZXRlUG9wdXAuY2xvc2UoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlUGljU3VibWl0KGRhdGEpIHtcclxuICBwcm9maWxlUGljUG9wdXAucmVuZGVyU2F2aW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLnVwZGF0ZVByb2ZpbGVQaWMoZGF0YSlcclxuICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgdGl0bGU6IGRhdGEuYWJvdXQsXHJcbiAgICAgICAgYXZhdGFyOiBkYXRhLmF2YXRhcixcclxuICAgICAgfSk7XHJcbiAgICAgIHByb2ZpbGVQaWNQb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwcm9maWxlUGljUG9wdXAucmVuZGVyU2F2aW5nKGZhbHNlLCBcImVkaXRcIik7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlTGlrZShjYXJkKSB7XHJcbiAgYXBpXHJcbiAgICAudG9nZ2xlTGlrZShjYXJkLl9pZCwgY2FyZC5pc0xpa2VkKCkpXHJcbiAgICAudGhlbigobGlrZXMpID0+IHtcclxuICAgICAgY2FyZC51cGRhdGVMaWtlcyhsaWtlcy5saWtlcyk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pO1xyXG59XHJcbiIsImNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lU2VsZWN0b3IsIHRpdGxlU2VsZWN0b3IsIHByb2ZpbGVQaWNTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl90aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGl0bGVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wcm9maWxlUGljID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlUGljU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCB1c2VyT2JqID0ge1xyXG4gICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgdGl0bGU6IHRoaXMuX3RpdGxlLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICAgIHJldHVybiB1c2VyT2JqO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCB0aXRsZSwgYXZhdGFyIH0pIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XHJcbiAgICB0aGlzLl9wcm9maWxlUGljLnNyYyA9IGF2YXRhcjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1hZ2VQb3B1cEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9pbWFnZVBvcHVwQ2FwdGlvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NhcHRpb25cIik7XHJcbiAgICB0aGlzLm9wZW4gPSB0aGlzLm9wZW4uYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oeyBsaW5rLCBuYW1lIH0pIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX2ltYWdlUG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5faW1hZ2VQb3B1cEltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZVBvcHVwQ2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZTtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhEZWxldGVDb25maXJtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oY2FyZCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fY2FyZCA9IGNhcmQ7XHJcbiAgfVxyXG5cclxuICByZW5kZXJTYXZpbmcoaXNTYXZpbmcsIGZvcm1UeXBlKSB7XHJcbiAgICBzdXBlci5yZW5kZXJTYXZpbmcoaXNTYXZpbmcsIGZvcm1UeXBlKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9jYXJkKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRGVsZXRlQ29uZmlybTtcclxuIl0sIm5hbWVzIjpbInNldHRpbmdzIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJwYWdlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicG9wdXBQcm9maWxlRm9ybSIsInBvcHVwQWRkRm9ybSIsInBvcHVwUHJvZmlsZVBpY0Zvcm0iLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwiZWRpdFByb2ZpbGVQaWNCdXR0b24iLCJwb3B1cE5hbWUiLCJwb3B1cFRpdGxlIiwiY29uc3RydWN0b3IiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfZm9ybSIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsIl9yZXNldEVycm9yIiwiX2hpZGVJbnB1dEVycm9yIiwicmVtb3ZlIiwic2V0VGltZW91dCIsIl9pc1ZhbGlkIiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsImlucHV0TGlzdCIsImV2ZXJ5IiwiX2Rpc2FibGVCdXR0b24iLCJfYnV0dG9uRWwiLCJkaXNhYmxlZCIsIl9lbmFibGVCdXR0b24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaW5wdXRFbHMiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJDYXJkIiwiZGF0YSIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVUcmFzaEJ1dHRvbkNsaWNrIiwiaGFuZGxlTGlrZUJ1dHRvbiIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfdGVtcGxhdGUiLCJfbGlrZXMiLCJsaWtlcyIsIl9oYW5kbGVUcmFzaEJ1dHRvbkNsaWNrIiwiX293bmVySWQiLCJvd25lciIsIl9pZCIsIl91c2VySWQiLCJ1c2VySWQiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ1cGRhdGVMaWtlcyIsIl9yZW5kZXJMaWtlcyIsIl9saWtlc1RvdGFsIiwibGVuZ3RoIiwiaXNMaWtlZCIsIl9saWtlQnV0dG9uIiwic29tZSIsImxpa2UiLCJfdHJhc2hCdXR0b24iLCJfaW1hZ2VFbCIsImdldENhcmRJZCIsImhhbmRsZURlbGV0ZSIsIl9jYXJkRWwiLCJnZXRWaWV3Iiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwib3BlbiIsImJpbmQiLCJjbG9zZSIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJyZW5kZXJTYXZpbmciLCJpc1NhdmluZyIsImZvcm1UeXBlIiwiX3N1Ym1pdEJ1dHRvbiIsInNldEV2ZW50TGlzdGVuZXJzIiwiX3BvcHVwQ2xvc2VCdXR0b24iLCJ0YXJnZXQiLCJtYXRjaGVzIiwiUG9wdXAiLCJoYW5kbGVTdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVTdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dEVscyIsImlucHV0VmFsdWVzIiwidmFsdWUiLCJyZXNldCIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9oYW5kbGVSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJpbml0aWFsaXplIiwiYWxsIiwiZ2V0VXNlciIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidGhlbiIsInNldFVzZXJJbmZvIiwidGl0bGUiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiYWRkQ2FyZCIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJ0b2dnbGVMaWtlIiwidXBkYXRlUHJvZmlsZVBpYyIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJyZW5kZXJDYXJkIiwiY2FyZCIsIm5ld0NhcmQiLCJjYXJkTGlzdCIsImFkZEl0ZW0iLCJpbWFnZVBvcHVwIiwiZGVsZXRlUG9wdXAiLCJ1c2VyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwidXNlckluZm8iLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJ1c2VyTmFtZVNlbGVjdG9yIiwidGl0bGVTZWxlY3RvciIsInByb2ZpbGVQaWNTZWxlY3RvciIsIl91c2VyTmFtZSIsIl90aXRsZSIsIl9wcm9maWxlUGljIiwiZ2V0VXNlckluZm8iLCJzcmMiLCJfaW1hZ2VQb3B1cEltYWdlIiwiX2ltYWdlUG9wdXBDYXB0aW9uIiwiYWx0IiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsImVkaXRQb3B1cCIsIlBvcHVwV2l0aEZvcm0iLCJmaW5hbGx5IiwiaGFuZGxlUHJvZmlsZU9wZW4iLCJhZGRQb3B1cCIsIl9jYXJkIiwiZSIsInByb2ZpbGVQaWNQb3B1cCJdLCJzb3VyY2VSb290IjoiIn0=